# Murder Every Monday (static)

- Static site (GH Pages) + Cloudflare in front
- GitHub Action scrapes the official list → `public/themes.json`
- OneSignal handles browser push; a weekly Action schedules the Monday push

## Setup

1) **OneSignal**
   - Create a Web Push app, get the **App ID** and **REST API Key**
   - In `public/index.html` set `window.ONESIGNAL_APP_ID`
   - Add repo **secrets**:
     - `ONESIGNAL_APP_ID`
     - `ONESIGNAL_REST_API_KEY`

2) **Domains**
   - Serve `public/` as the site root (GitHub Pages)
   - Put Cloudflare in front (CNAME to `username.github.io` or custom Pages domain)
   - Ensure the site is accessible at `https://YOUR_DOMAIN/`

3) **Actions**
   - Enable Actions for the repo
   - The **daily** workflow updates `public/themes.json`
   - The **Monday** workflow schedules a local-time (recipient) push via OneSignal

## Local dev

```bash
npm run build:themes    # generates public/themes.json
npm run serve           # open http://localhost:8080


murder-every-monday/
├─ public/
│  ├─ index.html
│  ├─ style.css
│  ├─ app.js
│  ├─ themes.json            # auto-generated by the Action (don’t edit)
│  ├─ OneSignalSDKWorker.js  # required by OneSignal
│  └─ OneSignalSDKUpdaterWorker.js
├─ scripts/
│  ├─ build-themes.js        # scrapes WP page → public/themes.json
│  └─ send-push.js           # schedules Monday local-time pushes via OneSignal
├─ .github/workflows/
│  ├─ build-themes.yml       # runs daily & on demand
│  └─ send-push.yml          # runs weekly to schedule Monday pushes
├─ package.json
└─ README.md
